

;; emacs -q -l ~/.emacs_alone


;; Added by Package.el.  This must come before configurations of
;; installed packages.  Don't delete this line.  If you don't want it,
;; just comment it out by adding a semicolon to the start of the line.
;; You may delete these explanatory comments.
(package-initialize)

(require 'package)

(setq package-archives '(("gnu"   . "http://mirrors.tuna.tsinghua.edu.cn/elpa/gnu/")
                         ("melpa" . "http://mirrors.tuna.tsinghua.edu.cn/elpa/melpa/")))


;; activate all the packages
(package-initialize)

;; fetch the list of packages available 
(unless package-archive-contents
  (package-refresh-contents))
 
 
;; ### for package install  not test 
(setq package-list
    '(better-defaults
;;    ein ;; jupyter-notebook for python
	evil
	molokai-theme 
	dumb-jump 
	auto-complete-c-headers 
	auto-complete 
	python-mode 
	neotree 
	flycheck 
	markdown-mode
	flymd
	elpy
	;;better-defaults 
	undo-tree
    material-theme
	helm
	))

; install the missing packages
(dolist (package package-list)
  (unless (package-installed-p package)
    (package-install package))) 
	
	

(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(custom-safe-themes
   (quote
    ("b571f92c9bfaf4a28cb64ae4b4cdbda95241cd62cf07d942be44dc8f46c491f4" default)))
 '(package-selected-packages
   (quote
    (helm molokai-theme dumb-jump evil auto-complete-c-headers auto-complete python-mode neotree flycheck material-theme better-defaults undo-tree)))
 '(tool-bar-mode nil))
 
;; not show tool bar
;; emms not used default
;; using theme "molokai"


(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 )

 

 



;; ### startup
(setq inhibit-startup-message t) ;; hide the startup message
(load-theme 'molokai t) ;; load material theme, using 
(global-linum-mode t) ;; enable line numbers globally


	
;; ### setting the font

;; default font setting
;;(set-frame-font "Microsoft Yahei 10" nil t) 

(add-to-list 'default-frame-alist '(font . "Droid Sans Mono-13" ))
(set-face-attribute 'default t :font "Droid Sans Mono-13" )


;;;中文与英文字体设置
;; 字体不等宽时会带慢光标的移动速度
;; 前面是设置英文字体（Lucida Console)，后面设置中文字体(microsoft yahei)
;; Auto generated by cnfonts
;; <https://github.com/tumashu/cnfonts>
(set-face-attribute
 'default nil
 :font (font-spec :name "-outline-Lucida Console-normal-normal-normal-mono-*-*-*-*-c-*-iso10646-1"
				  :weight 'normal
				  :slant 'normal
				  :size 9.0))
(dolist (charset '(kana han symbol cjk-misc bopomofo))
  (set-fontset-font
   (frame-parameter nil 'font)
   charset
   (font-spec :name "-outline-microsoft yahei-bold-normal-normal-sans-*-*-*-*-p-*-iso10646-1"
			  :weight 'normal
			  :slant 'normal
:size 10.5)))

  
;;(cnfonts-enable)
	 

 
;; ### evil for vim edit
(add-to-list 'load-path "~/.emacs.d/evil")
(require 'evil)
(evil-mode 1)

;; Use j/k to move one visual line insted of gj/gk
(define-key evil-normal-state-map (kbd "<remap> <evil-next-line>") 'evil-next-visual-line)
(define-key evil-normal-state-map (kbd "<remap> <evil-previous-line>") 'evil-previous-visual-line)
(define-key evil-motion-state-map (kbd "<remap> <evil-next-line>") 'evil-next-visual-line)
(define-key evil-motion-state-map (kbd "<remap> <evil-previous-line>") 'evil-previous-visual-line)


;; remove all keybindings from insert-state keymap, use emacs-state when editing
(setcdr evil-insert-state-map nil) 
;; ESC to switch back normal-state
(define-key evil-insert-state-map [escape] 'evil-normal-state)
    
;; TAB to indent in normal-state
(define-key evil-normal-state-map (kbd "TAB") 'indent-for-tab-command)

;;	;; remove all keybindings from insert-state keymap
;;	(setcdr evil-insert-state-map nil)
;;	;; but [escape] should switch back to normal state
;;	(define-key evil-insert-state-map [escape] 'evil-normal-state)
;;	(define-key evil-insert-state-map (kbd "jk") 'evil-normal-state)
;;	(define-key evil-insert-state-map (kbd "jj") 'insert-jay)
;;
;;	(defun insert-jay ()
;;	  (interactive)
;;	  (insert "j"))
;;	(evil-mode)
;;
;;	(define-key help-mode-map (kbd "i") 'evil-emacs-state)


;; ### for markdown
;; #### markdown-mode
;; download the markdown.pl to "~/.emacs.d/markdown-mode" first
;; add load-path for markdown-mode
(add-to-list 'load-path "~/.emacs.d/markdown-mode")
;; set autoload and ".md" file assosiation
(autoload 'markdown-mode "markdown-mode.el"  
	"Major mode for editing Markdown files" t)  
(setq auto-mode-alist  
(cons '(".md" . markdown-mode) auto-mode-alist))

;; #### for markdown fly render
(require 'flymd)



;; ### for python
;; the plugin: elpy  flycheck

(elpy-enable)

(when (require 'flycheck nil t)
  (setq elpy-modules (delq 'elpy-module-flymake elpy-modules))
  (add-hook 'elpy-mode-hook 'flycheck-mode))
  
;;(elpy-use-ipython)


;; ### emms for music play
;;(setq exec-path (append exec-path '("G:/Program Files (x86) portable/Anki")))
;;(require 'emms-setup)
;;(require 'emms-player-mplayer)
;;(emms-standard)
;;(emms-default-players)
;;(define-emms-simple-player mplayer '(file url)
;;      (regexp-opt '(".ogg" ".mp3" ".wav" ".mpg" ".mpeg" ".wmv" ".wma"
;;                    ".mov" ".avi" ".divx" ".ogm" ".asf" ".mkv" "http://" "mms://"
;;                    ".rm" ".rmvb" ".mp4" ".flac" ".vob" ".m4a" ".flv" ".ogv" ".pls"))
;;      "mplayer" "-slave" "-quiet" "-really-quiet" "-fullscreen")
;;(setq emms-source-file-default-directory "D:/Users/fly/Music")


;; ### neotree
(require 'neotree)
(global-set-key [f8] 'neotree-toggle)


;; ### coding system setting
(prefer-coding-system 'utf-8)
(setq utf-translate-cjk-mode nil) ; disable CJK coding/encoding (Chinese/Japanese/Korean characters)
(set-language-environment 'utf-8)
(set-keyboard-coding-system 'utf-8-mac) ; For old Carbon emacs on OS X only
(setq locale-coding-system 'utf-8)
(set-default-coding-systems 'utf-8)
(set-terminal-coding-system 'utf-8)
(unless (eq system-type 'windows-nt)
  (set-selection-coding-system 'utf-8))


;; ### browse-file-directory

(defun browse-file-directory ()
  "Open the current file's directory however the OS would."
  (interactive)
  (if default-directory
      (browse-url-of-file (expand-file-name default-directory))
    (error "No `default-directory' to open")))


;; ### for code jump
;; depandent on ag( The Silver Searcher )
;; (dump-jump-mode)


;; ### helm
(define-key evil-normal-state-map (kbd "M-x") 'helm-M-x)
(define-key evil-insert-state-map (kbd "M-x") 'helm-M-x)
